---
layout: post
title: git-remote-hg
location: Sydney
---

p. Following is a quick brain dump of getting set up with git-remote-hg.

pre.. sudo easy_install -U mercurial 
curl -O https://raw.github.com/git/git/master/contrib/remote-helpers/git-remote-hg 
chmod +x git-remote-hg
mv git-remote-hg ~/bin/
git config --global remote-hg.hg-git-compat true

git clone hg::<hg-url>

p. "git hooks to CYA when using hg-git mode with git-remote-hg":https://gist.github.com/barrbrain/5931547

p. .git/hooks/commit-msg

pre.. #!/bin/sh
test "2" = `grep -e '^--HG--$' -e '^branch : [^ ][^ ]*$' "$1"|wc -l` || {
  echo >&2 Missing hg branch specification.
  exit 1
}

p. .git/hooks/prepare-commit-msg

pre.. #!/bin/sh
grep -q '^--HG--$' "$1" || echo '--HG--
branch : '"`git symbolic-ref -q --short HEAD`" >> "$1"
